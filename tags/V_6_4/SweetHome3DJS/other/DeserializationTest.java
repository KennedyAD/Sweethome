/*
 * WizardControllerTest.java 7 juin 07
 *
 * Copyright (c) 2007 Emmanuel PUYBARET / eTeks <info@eteks.com>. All Rights Reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
package com.eteks.sweethome3d.junit;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.StandardCopyOption;
import java.util.List;
import java.util.Optional;
import java.util.stream.Collectors;

import javax.swing.undo.UndoableEdit;

import org.json.JSONException;

import com.eteks.sweethome3d.io.HomeEditsDeserializer;
import com.eteks.sweethome3d.io.HomeFileRecorder;
import com.eteks.sweethome3d.model.Home;
import com.eteks.sweethome3d.model.HomeObject;
import com.eteks.sweethome3d.model.HomeRecorder;
import com.eteks.sweethome3d.model.Polyline;
import com.eteks.sweethome3d.model.RecorderException;

import junit.framework.TestCase;

/**
 * Tests {@link com.eteks.sweethome3d.io.HomeEditsDeserializer edits deserializer}.
 * @author Renaud Pawlak
 * @author Emmanuel Puybaret
 */
public class DeserializationTest extends TestCase {
  
  public void testEditsStreamDeserialization () throws RecorderException, JSONException, IOException, ReflectiveOperationException {
    HomeRecorder recorder = new HomeFileRecorder(0, false, null, false, true);
    File file = new File("test/resources/HomeTest.sh3d");
    Home home = recorder.readHome(file.getPath());

    File tempFile = File.createTempFile("open-", ".sh3d");
    Files.copy(file.toPath(), tempFile.toPath(), StandardCopyOption.REPLACE_EXISTING);
    List<UndoableEdit> edits = new HomeEditsDeserializer(home, tempFile, new File(".").toURI().toURL().toString()).deserializeEdits(
          "["
        + "{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.WallsCreationUndoableEdit\",\"hasBeenDone\":true,\"alive\":true,\"presentationNameKey\":\"undoCreateWallsName\",\"oldSelection\":[],\"oldBasePlanLocked\":false,\"oldAllLevelsSelection\":false,\"joinedNewWalls\":[{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.JoinedWall\",\"wall\":\"wall-d518deed-bdea-45a2-8905-cfe89868c27e\",\"level\":null,\"xStart\":525.8488106708302,\"yStart\":100.07811,\"xEnd\":749.8488106708302,\"yEnd\":100.07811,\"wallAtStart\":null,\"wallAtEnd\":\"wall-d5042d56-fbfc-4257-bd22-ce7dad2a4170\",\"joinedAtEndOfWallAtStart\":false,\"joinedAtStartOfWallAtEnd\":true},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.JoinedWall\",\"wall\":\"wall-d5042d56-fbfc-4257-bd22-ce7dad2a4170\",\"level\":null,\"xStart\":749.8488106708302,\"yStart\":100.07811,\"xEnd\":749.8488106708302,\"yEnd\":337.07811,\"wallAtStart\":\"wall-d518deed-bdea-45a2-8905-cfe89868c27e\",\"wallAtEnd\":\"wall-410f945f-5490-4866-9d23-6be9dab5df2d\",\"joinedAtEndOfWallAtStart\":true,\"joinedAtStartOfWallAtEnd\":true},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.JoinedWall\",\"wall\":\"wall-410f945f-5490-4866-9d23-6be9dab5df2d\",\"level\":null,\"xStart\":749.8488106708302,\"yStart\":337.07811,\"xEnd\":749.8488106708302,\"yEnd\":337.07811000000004,\"wallAtStart\":\"wall-d5042d56-fbfc-4257-bd22-ce7dad2a4170\",\"wallAtEnd\":null,\"joinedAtEndOfWallAtStart\":true,\"joinedAtStartOfWallAtEnd\":false}],\"newBasePlanLocked\":false,\"_newObjects\":{\"wall-d518deed-bdea-45a2-8905-cfe89868c27e\":{\"_type\":\"com.eteks.sweethome3d.model.Wall\",\"id\":\"wall-d518deed-bdea-45a2-8905-cfe89868c27e\",\"properties\":null,\"xStart\":525.8488106708302,\"yStart\":100.07811,\"xEnd\":749.8488106708302,\"yEnd\":100.07811,\"arcExtent\":null,\"wallAtStart\":null,\"wallAtEnd\":\"wall-d5042d56-fbfc-4257-bd22-ce7dad2a4170\",\"thickness\":7.5,\"height\":250,\"heightAtEnd\":null,\"leftSideColor\":null,\"leftSideTexture\":null,\"leftSideShininess\":0,\"leftSideBaseboard\":null,\"rightSideColor\":null,\"rightSideTexture\":null,\"rightSideShininess\":0,\"rightSideBaseboard\":null,\"pattern\":{\"_type\":\"com.eteks.sweethome3d.io.DefaultPatternTexture\",\"name\":\"hatchUp\",\"image\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"http://localhost:8080/lib//resources/patterns/hatchUp.png\"}},\"topColor\":null,\"level\":null,\"shapeCache\":{\"_type\":\"java.awt.geom.GeneralPath\",\"pointTypes\":[0,1,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"numTypes\":5,\"numCoords\":8,\"windingRule\":1,\"floatCoords\":[525.8488106708302,96.32811,753.5988106708302,96.32811,746.0988106708302,103.82811,525.8488106708302,103.82811,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},\"arcCircleCenterCache\":null,\"pointsCache\":[[525.8488106708302,96.32811],[753.5988106708302,96.32811],[746.0988106708302,103.82811],[525.8488106708302,103.82811]],\"pointsIncludingBaseboardsCache\":null,\"symmetric\":true},\"wall-d5042d56-fbfc-4257-bd22-ce7dad2a4170\":{\"_type\":\"com.eteks.sweethome3d.model.Wall\",\"id\":\"wall-d5042d56-fbfc-4257-bd22-ce7dad2a4170\",\"properties\":null,\"xStart\":749.8488106708302,\"yStart\":100.07811,\"xEnd\":749.8488106708302,\"yEnd\":337.07811,\"arcExtent\":null,\"wallAtStart\":\"wall-d518deed-bdea-45a2-8905-cfe89868c27e\",\"wallAtEnd\":\"wall-410f945f-5490-4866-9d23-6be9dab5df2d\",\"thickness\":7.5,\"height\":250,\"heightAtEnd\":null,\"leftSideColor\":null,\"leftSideTexture\":null,\"leftSideShininess\":0,\"leftSideBaseboard\":null,\"rightSideColor\":null,\"rightSideTexture\":null,\"rightSideShininess\":0,\"rightSideBaseboard\":null,\"pattern\":{\"_type\":\"com.eteks.sweethome3d.io.DefaultPatternTexture\",\"name\":\"hatchUp\",\"image\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"http://localhost:8080/lib//resources/patterns/hatchUp.png\"}},\"topColor\":null,\"level\":null,\"shapeCache\":{\"_type\":\"java.awt.geom.GeneralPath\",\"pointTypes\":[0,1,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"numTypes\":5,\"numCoords\":8,\"windingRule\":1,\"floatCoords\":[753.5988106708302,96.32811,753.5988106708302,337.07811,746.0988106708302,337.07811,746.0988106708302,103.82811,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},\"arcCircleCenterCache\":null,\"pointsCache\":[[753.5988106708302,96.32811],[753.5988106708302,337.07811],[746.0988106708302,337.07811],[746.0988106708302,103.82811]],\"pointsIncludingBaseboardsCache\":null,\"symmetric\":true},\"wall-410f945f-5490-4866-9d23-6be9dab5df2d\":{\"_type\":\"com.eteks.sweethome3d.model.Wall\",\"id\":\"wall-410f945f-5490-4866-9d23-6be9dab5df2d\",\"properties\":null,\"xStart\":749.8488106708302,\"yStart\":337.07811,\"xEnd\":749.8488106708302,\"yEnd\":337.07811000000004,\"arcExtent\":null,\"wallAtStart\":\"wall-d5042d56-fbfc-4257-bd22-ce7dad2a4170\",\"wallAtEnd\":null,\"thickness\":7.5,\"height\":250,\"heightAtEnd\":null,\"leftSideColor\":null,\"leftSideTexture\":null,\"leftSideShininess\":0,\"leftSideBaseboard\":null,\"rightSideColor\":null,\"rightSideTexture\":null,\"rightSideShininess\":0,\"rightSideBaseboard\":null,\"pattern\":{\"_type\":\"com.eteks.sweethome3d.io.DefaultPatternTexture\",\"name\":\"hatchUp\",\"image\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"http://localhost:8080/lib//resources/patterns/hatchUp.png\"}},\"topColor\":null,\"level\":null,\"shapeCache\":null,\"arcCircleCenterCache\":null,\"pointsCache\":[[753.5988106708302,337.07811],[753.5988106708302,337.07811000000004],[746.0988106708302,337.07811000000004],[746.0988106708302,337.07811]],\"pointsIncludingBaseboardsCache\":null,\"symmetric\":true}}}"
        + ","
        + "{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.RoomsCreationUndoableEdit\",\"hasBeenDone\":true,\"alive\":true,\"presentationNameKey\":\"undoCreateRoomsName\",\"oldSelection\":[],\"oldBasePlanLocked\":false,\"oldAllLevelsSelection\":false,\"newRooms\":[\"room-4aab99b2-1ef2-4d8b-a978-f8cd08d55f18\"],\"roomsIndex\":[2],\"roomsLevel\":null,\"newBasePlanLocked\":false,\"_newObjects\":{\"room-4aab99b2-1ef2-4d8b-a978-f8cd08d55f18\":{\"_type\":\"com.eteks.sweethome3d.model.Room\",\"id\":\"room-4aab99b2-1ef2-4d8b-a978-f8cd08d55f18\",\"properties\":null,\"name\":null,\"nameXOffset\":0,\"nameYOffset\":-40,\"nameStyle\":null,\"nameAngle\":0,\"points\":[[525.8488,103.82811],[746.0988,103.82811],[746.0988,337.07812],[525.8488,337.07811999999996]],\"areaVisible\":true,\"areaXOffset\":0,\"areaYOffset\":0,\"areaStyle\":null,\"areaAngle\":0,\"floorVisible\":true,\"floorColor\":null,\"floorTexture\":null,\"floorShininess\":0,\"ceilingVisible\":false,\"ceilingColor\":null,\"ceilingTexture\":null,\"ceilingShininess\":0,\"level\":null,\"shapeCache\":{\"_type\":\"java.awt.geom.GeneralPath\",\"pointTypes\":[0,1,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"numTypes\":5,\"numCoords\":8,\"windingRule\":1,\"floatCoords\":[525.8488,103.82811,746.0988,103.82811,746.0988,337.07812,525.8488,337.07811999999996,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},\"areaCache\":51373.31470250001}}}"
        + "]"
    );
    for (UndoableEdit edit : edits) {
      edit.redo();
    }
    assertEquals("Wrong undo count", 2, edits.size());

    File savedFile = File.createTempFile("save-", ".sh3d");
    recorder.writeHome(home, savedFile.getPath());
    assertTrue("Empty file", savedFile.length() > 0);

    tempFile.delete();
    savedFile.delete();
  }
  
  public void testResizingEdit () throws RecorderException, JSONException, IOException, ReflectiveOperationException {
    HomeRecorder recorder = new HomeFileRecorder(0, false, null, false, true);
    File file = new File("test/resources/HomeTest.sh3d");
    Home home = recorder.readHome(file.getPath());

    File tempFile = File.createTempFile("open-", ".sh3d");
    Files.copy(file.toPath(), tempFile.toPath(), StandardCopyOption.REPLACE_EXISTING);
    Optional<HomeObject> homeObject = (Optional<HomeObject>)home.getHomeObjects().stream().filter(o -> "polyline-778b729f-47a8-4c70-a086-be423eceba59".equals(o.getId())).findFirst();
    assertTrue(homeObject.isPresent());
    assertTrue(homeObject.get() instanceof Polyline);
    Polyline polyline = (Polyline)homeObject.get();
    
    List<UndoableEdit> edits = new HomeEditsDeserializer(home, tempFile, new File(".").toURI().toURL().toString()).deserializeEdits(
          "["
        + "{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.PolylineResizingUndoableEdit\",\"oldX\":-55.91092,\"oldY\":177.5383,\"polyline\":\"polyline-778b729f-47a8-4c70-a086-be423eceba59\",\"pointIndex\":1,\"newX\":-80.99411,\"newY\":165.1319}"
        + "]"
    );
    assertEquals(1, edits.size());
    HomeEditsDeserializer.applyEdits(edits);

    assertEquals(-80.99411, polyline.getPoints()[1][0], 0.0001);
    assertEquals(165.1319, polyline.getPoints()[1][1], 0.0001);
    
    File savedFile = File.createTempFile("save-", ".sh3d");
    recorder.writeHome(home, savedFile.getPath());
    assertTrue("Empty file", savedFile.length() > 0);

    tempFile.delete();
    savedFile.delete();
  }

  public void testMovingEdit () throws RecorderException, JSONException, IOException, ReflectiveOperationException {
    HomeRecorder recorder = new HomeFileRecorder(0, false, null, false, true);
    File file = new File("test/resources/HomeTest.sh3d");
    Home home = recorder.readHome(file.getPath());

    File tempFile = File.createTempFile("open-", ".sh3d");
    Files.copy(file.toPath(), tempFile.toPath(), StandardCopyOption.REPLACE_EXISTING);
    Optional<HomeObject> homeObject = (Optional<HomeObject>)home.getHomeObjects().stream().filter(o -> "polyline-778b729f-47a8-4c70-a086-be423eceba59".equals(o.getId())).findFirst();
    assertTrue(homeObject.isPresent());
    assertTrue(homeObject.get() instanceof Polyline);
    Polyline polyline = (Polyline)homeObject.get();
    float orgX = polyline.getPoints()[1][0];
    float orgY = polyline.getPoints()[1][1];
    
    List<UndoableEdit> edits = new HomeEditsDeserializer(home, tempFile, new File(".").toURI().toURL().toString()).deserializeEdits(
          "["
        + "{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.PieceOfFurnitureMovingUndoableEdit\",\"oldAngle\":4.3597717,\"oldDepth\":49.899998,\"oldElevation\":0,\"oldDoorOrWindowBoundToWall\":false,\"piece\":\"pieceOfFurniture-6b4c53e1-745e-4581-930b-c8e3a07a0d6b\",\"dx\":429.33333333333337,\"dy\":20,\"newAngle\":4.3597717,\"newDepth\":49.899998,\"newElevation\":0}"
        + ","      
        + "{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.ItemsMovingUndoableEdit\",\"oldSelection\":[\"polyline-778b729f-47a8-4c70-a086-be423eceba59\"],\"allLevelsSelection\":false,\"itemsArray\":[\"polyline-778b729f-47a8-4c70-a086-be423eceba59\"],\"dx\":-18.666666666666657,\"dy\":-6.666666666666629}"
        + "]"
    );
    assertEquals(2, edits.size());
    HomeEditsDeserializer.applyEdits(edits);

    assertEquals(orgX - 18.666666666666657, polyline.getPoints()[1][0], 0.0001);
    assertEquals(orgY - 6.666666666666629, polyline.getPoints()[1][1], 0.0001);

    File savedFile = File.createTempFile("save-", ".sh3d");
    recorder.writeHome(home, savedFile.getPath());
    assertTrue("Empty file", savedFile.length() > 0);

    tempFile.delete();
    savedFile.delete();
  }
  
  public void testCopyPasteEdit () throws RecorderException, JSONException, IOException, ReflectiveOperationException {
    HomeRecorder recorder = new HomeFileRecorder(0, false, null, false, true);
    File file = new File("test/resources/HomeTest.sh3d");
    Home home = recorder.readHome(file.getPath());

    File tempFile = File.createTempFile("open-", ".sh3d");
    Files.copy(file.toPath(), tempFile.toPath(), StandardCopyOption.REPLACE_EXISTING);
    Optional<HomeObject> homeObject = (Optional<HomeObject>)home.getHomeObjects().stream().filter(o -> "polyline-778b729f-47a8-4c70-a086-be423eceba59".equals(o.getId())).findFirst();
    assertTrue(homeObject.isPresent());
    assertTrue(homeObject.get() instanceof Polyline);
    List<HomeObject> polylines = home.getHomeObjects().stream().filter(o -> o instanceof Polyline).collect(Collectors.toList());
    int originalCount = polylines.size();
    assertEquals(7, originalCount);
    
    List<UndoableEdit> edits = new HomeEditsDeserializer(home, tempFile, new File(".").toURI().toURL().toString()).deserializeEdits(
          "["
        + "{\"_type\":\"javax.swing.undo.CompoundEdit\",\"inProgress\":false,\"edits\":[{\"_type\":\"com.eteks.sweethome3d.viewcontroller.FurnitureController.FurnitureAdditionUndoableEdit\",\"allLevelsSelection\":false,\"oldSelection\":[\"polyline-778b729f-47a8-4c70-a086-be423eceba59\"],\"oldBasePlanLocked\":false,\"newFurniture\":[],\"newFurnitureIndex\":[],\"newFurnitureGroups\":null,\"newFurnitureLevels\":null,\"furnitureLevel\":null,\"newBasePlanLocked\":false},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.PolylinesCreationUndoableEdit\",\"oldSelection\":[],\"oldBasePlanLocked\":false,\"oldAllLevelsSelection\":false,\"newPolylines\":[\"polyline-f0fb19e5-1f01-44cb-8495-9acef8744519\"],\"polylinesIndex\":[7],\"polylinesLevel\":null,\"newBasePlanLocked\":false},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.ItemsAdditionEndUndoableEdit\",\"items\":[\"polyline-f0fb19e5-1f01-44cb-8495-9acef8744519\"]},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.LocalizedUndoableEdit\"}],\"_newObjects\":{\"polyline-f0fb19e5-1f01-44cb-8495-9acef8744519\":{\"_type\":\"com.eteks.sweethome3d.model.Polyline\",\"id\":\"polyline-f0fb19e5-1f01-44cb-8495-9acef8744519\",\"properties\":null,\"points\":[[110.00589,229.46523],[62.08908,241.87163],[75.116577,282.6942],[40.166579999999996,294.18665]],\"thickness\":3,\"capStyleName\":null,\"joinStyleName\":\"CURVED\",\"dashStyleName\":\"DASH\",\"dashPattern\":null,\"dashOffset\":0.4,\"startArrowStyleName\":\"OPEN\",\"endArrowStyleName\":null,\"closedPath\":false,\"color\":-1638351,\"elevation\":0,\"level\":null}}}"
        + "]"
    );
    assertEquals(1, edits.size());
    HomeEditsDeserializer.applyEdits(edits);

    polylines = home.getHomeObjects().stream().filter(o -> o instanceof Polyline).collect(Collectors.toList());
    assertEquals(originalCount + 1, polylines.size());
    
    File savedFile = File.createTempFile("save-", ".sh3d");
    recorder.writeHome(home, savedFile.getPath());
    assertTrue("Empty file", savedFile.length() > 0);

    tempFile.delete();
    savedFile.delete();
  }

  public void testGroupUngroupEdits () throws RecorderException, JSONException, IOException, ReflectiveOperationException {
    HomeRecorder recorder = new HomeFileRecorder(0, false, null, false, true);
    File file = new File("test/resources/HomeTest.sh3d");
    Home home = recorder.readHome(file.getPath());

    File tempFile = File.createTempFile("open-", ".sh3d");
    Files.copy(file.toPath(), tempFile.toPath(), StandardCopyOption.REPLACE_EXISTING);
    
    List<UndoableEdit> edits = new HomeEditsDeserializer(home, tempFile, new File(".").toURI().toURL().toString()).deserializeEdits(
          "["
        + "{\"_type\":\"com.eteks.sweethome3d.viewcontroller.FurnitureController.FurnitureUngroupingUndoableEdit\",\"oldBasePlanLocked\":false,\"oldSelection\":[\"furnitureGroup-cec39579-114b-4cd1-8fd4-0a05640605ff\"],\"allLevelsSelection\":false,\"groups\":[\"furnitureGroup-cec39579-114b-4cd1-8fd4-0a05640605ff\"],\"groupsIndex\":[0],\"groupsGroups\":[null],\"groupsLevels\":[null],\"ungroupedPieces\":[\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\",\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"pieceOfFurniture-aa9d7cfd-12ad-40d1-8884-b404ef7cfe5e\"],\"ungroupedPiecesIndex\":[0,1,2],\"ungroupedPiecesGroups\":[null,null,null],\"ungroupedPiecesLevels\":[null,null,null],\"newBasePlanLocked\":false}"
        + ","
        + "{\"_type\":\"com.eteks.sweethome3d.viewcontroller.FurnitureController.FurnitureGroupingUndoableEdit\",\"oldSelection\":[\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\",\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"pieceOfFurniture-aa9d7cfd-12ad-40d1-8884-b404ef7cfe5e\"],\"basePlanLocked\":false,\"allLevelsSelection\":false,\"groupedPieces\":[\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\",\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"pieceOfFurniture-aa9d7cfd-12ad-40d1-8884-b404ef7cfe5e\"],\"groupedPiecesIndex\":[0,1,2],\"groupedPiecesGroups\":[null,null,null],\"groupedPiecesLevel\":[null,null,null],\"groupedPiecesElevation\":[0,0,0],\"groupedPiecesVisible\":[true,true,true],\"newGroup\":\"furnitureGroup-89baeff9-f84d-4839-b71a-f24391331080\",\"groupIndex\":0,\"groupLevel\":null,\"groupPiecesNewElevation\":[0,0,0],\"movable\":true,\"_newObjects\":[{\"_type\":\"com.eteks.sweethome3d.model.HomeFurnitureGroup\",\"id\":\"furnitureGroup-89baeff9-f84d-4839-b71a-f24391331080\",\"properties\":null,\"catalogId\":\"eTeks#chair2\",\"name\":\"Groupe -1-\",\"nameVisible\":false,\"nameXOffset\":0,\"nameYOffset\":0,\"nameStyle\":null,\"nameAngle\":0,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/3\"},\"planIcon\":null,\"model\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/4\"},\"modelSize\":16429,\"width\":191.95857100000003,\"widthInPlan\":191.95857100000003,\"depth\":49.90001450000001,\"depthInPlan\":49.90001450000001,\"height\":80.00001,\"heightInPlan\":80.00001,\"elevation\":0,\"dropOnTopElevation\":0.55625,\"movable\":true,\"doorOrWindow\":false,\"modelMaterials\":[{\"_type\":\"com.eteks.sweethome3d.model.HomeMaterial\",\"name\":\"fltan\",\"key\":null,\"color\":null,\"texture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"Puybaret#oak3\",\"name\":\"Chêne\",\"creator\":\"Emmanuel Puybaret\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/5\"},\"width\":40,\"height\":80,\"xOffset\":0,\"yOffset\":0,\"angle\":1.5707964,\"scale\":1,\"leftToRightOriented\":true},\"shininess\":0}],\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,1,0],[0,0,1]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":null,\"staircaseCutOutShape\":null,\"creator\":\"eTeks\",\"backFaceShown\":false,\"resizable\":true,\"deformable\":true,\"texturable\":true,\"horizontallyRotatable\":true,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":296.64243450000004,\"y\":58.93276925,\"angle\":0,\"pitch\":0,\"roll\":0,\"modelMirrored\":false,\"level\":null,\"furniture\":[\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\",\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"pieceOfFurniture-aa9d7cfd-12ad-40d1-8884-b404ef7cfe5e\"],\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable\":true,\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable\":true,\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable\":true,\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow\":false,\"fixedWidth\":0,\"fixedDepth\":0,\"fixedHeight\":0,\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation\":1,\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency\":null}]}"
        + ","
        + "{\"_type\":\"com.eteks.sweethome3d.viewcontroller.FurnitureController.FurnitureGroupingUndoableEdit\",\"oldSelection\":[\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\",\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"pieceOfFurniture-aa9d7cfd-12ad-40d1-8884-b404ef7cfe5e\"],\"basePlanLocked\":false,\"allLevelsSelection\":false,\"groupedPieces\":[\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\",\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"pieceOfFurniture-aa9d7cfd-12ad-40d1-8884-b404ef7cfe5e\"],\"groupedPiecesIndex\":[0,1,2],\"groupedPiecesGroups\":[null,null,null],\"groupedPiecesLevel\":[null,null,null],\"groupedPiecesElevation\":[0,0,0],\"groupedPiecesVisible\":[true,true,true],\"newGroup\":\"furnitureGroup-89baeff9-f84d-4839-b71a-f24391331080\",\"groupIndex\":0,\"groupLevel\":null,\"groupPiecesNewElevation\":[0,0,0],\"movable\":true,\"_action\":\"undo\"}"
        + "]"
    );
    assertEquals(3, edits.size());
    HomeEditsDeserializer.applyEdits(edits);
    
    File savedFile = File.createTempFile("save-", ".sh3d");
    recorder.writeHome(home, savedFile.getPath());
    assertTrue("Empty file", savedFile.length() > 0);

    tempFile.delete();
    savedFile.delete();
  }

  public void testTopAlignmentEdit() throws RecorderException, JSONException, IOException, ReflectiveOperationException {
    HomeRecorder recorder = new HomeFileRecorder(0, false, null, false, true);
    File file = new File("test/resources/HomeTest.sh3d");
    Home home = recorder.readHome(file.getPath());

    File tempFile = File.createTempFile("open-", ".sh3d");
    Files.copy(file.toPath(), tempFile.toPath(), StandardCopyOption.REPLACE_EXISTING);
    
    List<UndoableEdit> edits = new HomeEditsDeserializer(home, tempFile, new File(".").toURI().toURL().toString()).deserializeEdits(
          "["
        + "{\"_type\":\"com.eteks.sweethome3d.viewcontroller.FurnitureController.FurnitureTopAlignmentUndoableEdit\",\"oldSelection\":[\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\"],\"selectedFurniture\":[\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\"],\"leadPiece\":\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"alignedFurniture\":[\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\"],\"oldX\":[224.96315],\"oldY\":[58.932762]}"
        + "]"
    );
    assertEquals(1, edits.size());
    HomeEditsDeserializer.applyEdits(edits);
    
    File savedFile = File.createTempFile("save-", ".sh3d");
    recorder.writeHome(home, savedFile.getPath());
    assertTrue("Empty file", savedFile.length() > 0);

    tempFile.delete();
    savedFile.delete();
  }

  public void testUndoDeletionEdit() throws RecorderException, JSONException, IOException, ReflectiveOperationException {
    HomeRecorder recorder = new HomeFileRecorder(0, false, null, false, true);
    File file = new File("test/resources/HomeTest.sh3d");
    Home home = recorder.readHome(file.getPath());

    File tempFile = File.createTempFile("open-", ".sh3d");
    Files.copy(file.toPath(), tempFile.toPath(), StandardCopyOption.REPLACE_EXISTING);
    
    List<UndoableEdit> edits = new HomeEditsDeserializer(home, tempFile, new File(".").toURI().toURL().toString()).deserializeEdits(
          "["
        + "{\"_type\":\"javax.swing.undo.CompoundEdit\",\"inProgress\":false,\"edits\":[{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.ItemsDeletionStartUndoableEdit\",\"allLevelsSelection\":false,\"selectedItems\":[\"wall-772a1914-5623-4ab8-a573-b0b8ad5028b4\",\"wall-1b8554c2-b8f9-44bf-8eb4-abef1ee9bfa5\",\"wall-68680f92-08e1-47df-ae4e-249d0a30d06b\",\"wall-cf94d0c7-02e0-40af-9433-efee3efbf19d\",\"wall-a92c3db2-3d2e-4fa2-84b3-5bfa01b3f78f\",\"wall-b36f657b-55e2-4cf1-9949-b31feaf62c69\",\"wall-d2f1540f-bf43-45a4-bffb-73aa0d526e35\",\"room-8267031f-0fdc-416b-8fa2-678895993124\",\"room-93cb2474-1581-41a6-bd37-606e406a003f\",\"dimensionLine-910f572d-b81e-462c-a1dc-01267f3fc203\",\"dimensionLine-60b32b20-c1f6-4b32-8aca-bfa7649e2f2e\",\"dimensionLine-2713f54f-a2bd-41f2-8910-e4e73aa7195f\",\"dimensionLine-37fbd9f5-cf15-4aae-9232-6545db84f21f\",\"polyline-778b729f-47a8-4c70-a086-be423eceba59\",\"polyline-af4cc15b-45cf-4839-9e4d-fc349f2a671a\",\"polyline-2c8b98a4-2c53-4935-bd78-bf0ce71db0be\",\"polyline-7c124360-d8ea-4778-9b4b-e6942107286a\",\"polyline-23dc5aa2-d39f-4648-a5c3-d793c455ff89\",\"polyline-29d75df8-61f1-4894-8122-15087e92d9c9\",\"polyline-5571dcb8-2645-499c-9bec-91efb7068f78\",\"label-8bb3dbfa-4225-4689-9cb8-098626073638\",\"label-95cd4783-d217-401b-9846-7f8dd15d3c44\",\"label-8ffffcc7-1222-42e9-80ed-ddc1ab07856e\",\"label-2926a260-3c13-40c4-9a2e-3fd489e383a1\",\"label-1d133945-668b-4458-b8ea-b6d910332f9e\",\"label-3f58b8ec-7c10-4941-980d-ef86b517da5b\",\"label-0079e743-90fa-4354-a89e-06d028e0e375\",\"label-2db57f93-31e8-406c-9349-3b339ed931d9\",\"label-64750a06-c695-40c0-9571-e8f5d777dba9\",\"furnitureGroup-91bc763c-6ef2-41d7-b699-090bb2892aea\",\"doorOrWindow-5ffb0568-496f-4ba0-b818-2ca8c01430f3\",\"doorOrWindow-fbcb8a4c-ffd3-4297-929c-7cab17893958\",\"doorOrWindow-929cc809-9ee2-4c13-9202-b74672f7b7ca\",\"pieceOfFurniture-6b4c53e1-745e-4581-930b-c8e3a07a0d6b\",\"light-1bb7757a-437f-40a5-b26f-d779682991b4\",\"pieceOfFurniture-2b845e86-39bd-4e6a-a938-edca5e9d75fc\",\"compass-homeCompass\"]},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.FurnitureController.FurnitureDeletionUndoableEdit\",\"oldSelection\":[\"wall-772a1914-5623-4ab8-a573-b0b8ad5028b4\",\"wall-1b8554c2-b8f9-44bf-8eb4-abef1ee9bfa5\",\"wall-68680f92-08e1-47df-ae4e-249d0a30d06b\",\"wall-cf94d0c7-02e0-40af-9433-efee3efbf19d\",\"wall-a92c3db2-3d2e-4fa2-84b3-5bfa01b3f78f\",\"wall-b36f657b-55e2-4cf1-9949-b31feaf62c69\",\"wall-d2f1540f-bf43-45a4-bffb-73aa0d526e35\",\"room-8267031f-0fdc-416b-8fa2-678895993124\",\"room-93cb2474-1581-41a6-bd37-606e406a003f\",\"dimensionLine-910f572d-b81e-462c-a1dc-01267f3fc203\",\"dimensionLine-60b32b20-c1f6-4b32-8aca-bfa7649e2f2e\",\"dimensionLine-2713f54f-a2bd-41f2-8910-e4e73aa7195f\",\"dimensionLine-37fbd9f5-cf15-4aae-9232-6545db84f21f\",\"polyline-778b729f-47a8-4c70-a086-be423eceba59\",\"polyline-af4cc15b-45cf-4839-9e4d-fc349f2a671a\",\"polyline-2c8b98a4-2c53-4935-bd78-bf0ce71db0be\",\"polyline-7c124360-d8ea-4778-9b4b-e6942107286a\",\"polyline-23dc5aa2-d39f-4648-a5c3-d793c455ff89\",\"polyline-29d75df8-61f1-4894-8122-15087e92d9c9\",\"polyline-5571dcb8-2645-499c-9bec-91efb7068f78\",\"label-8bb3dbfa-4225-4689-9cb8-098626073638\",\"label-95cd4783-d217-401b-9846-7f8dd15d3c44\",\"label-8ffffcc7-1222-42e9-80ed-ddc1ab07856e\",\"label-2926a260-3c13-40c4-9a2e-3fd489e383a1\",\"label-1d133945-668b-4458-b8ea-b6d910332f9e\",\"label-3f58b8ec-7c10-4941-980d-ef86b517da5b\",\"label-0079e743-90fa-4354-a89e-06d028e0e375\",\"label-2db57f93-31e8-406c-9349-3b339ed931d9\",\"label-64750a06-c695-40c0-9571-e8f5d777dba9\",\"furnitureGroup-91bc763c-6ef2-41d7-b699-090bb2892aea\",\"doorOrWindow-5ffb0568-496f-4ba0-b818-2ca8c01430f3\",\"doorOrWindow-fbcb8a4c-ffd3-4297-929c-7cab17893958\",\"doorOrWindow-929cc809-9ee2-4c13-9202-b74672f7b7ca\",\"pieceOfFurniture-6b4c53e1-745e-4581-930b-c8e3a07a0d6b\",\"light-1bb7757a-437f-40a5-b26f-d779682991b4\",\"pieceOfFurniture-2b845e86-39bd-4e6a-a938-edca5e9d75fc\",\"compass-homeCompass\"],\"basePlanLocked\":false,\"allLevelsSelection\":false,\"furniture\":[\"furnitureGroup-91bc763c-6ef2-41d7-b699-090bb2892aea\",\"doorOrWindow-5ffb0568-496f-4ba0-b818-2ca8c01430f3\",\"doorOrWindow-fbcb8a4c-ffd3-4297-929c-7cab17893958\",\"doorOrWindow-929cc809-9ee2-4c13-9202-b74672f7b7ca\",\"pieceOfFurniture-6b4c53e1-745e-4581-930b-c8e3a07a0d6b\",\"light-1bb7757a-437f-40a5-b26f-d779682991b4\",\"pieceOfFurniture-2b845e86-39bd-4e6a-a938-edca5e9d75fc\"],\"furnitureIndex\":[0,1,2,3,4,5,6],\"furnitureGroups\":[null,null,null,null,null,null,null],\"furnitureLevels\":[null,null,null,null,null,null,null]},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.ItemsDeletionUndoableEdit\",\"basePlanLocked\":false,\"allLevelsSelection\":false,\"deletedItems\":[\"wall-772a1914-5623-4ab8-a573-b0b8ad5028b4\",\"wall-1b8554c2-b8f9-44bf-8eb4-abef1ee9bfa5\",\"wall-68680f92-08e1-47df-ae4e-249d0a30d06b\",\"wall-cf94d0c7-02e0-40af-9433-efee3efbf19d\",\"wall-a92c3db2-3d2e-4fa2-84b3-5bfa01b3f78f\",\"wall-b36f657b-55e2-4cf1-9949-b31feaf62c69\",\"wall-d2f1540f-bf43-45a4-bffb-73aa0d526e35\",\"room-8267031f-0fdc-416b-8fa2-678895993124\",\"room-93cb2474-1581-41a6-bd37-606e406a003f\",\"dimensionLine-910f572d-b81e-462c-a1dc-01267f3fc203\",\"dimensionLine-60b32b20-c1f6-4b32-8aca-bfa7649e2f2e\",\"dimensionLine-2713f54f-a2bd-41f2-8910-e4e73aa7195f\",\"dimensionLine-37fbd9f5-cf15-4aae-9232-6545db84f21f\",\"polyline-778b729f-47a8-4c70-a086-be423eceba59\",\"polyline-af4cc15b-45cf-4839-9e4d-fc349f2a671a\",\"polyline-2c8b98a4-2c53-4935-bd78-bf0ce71db0be\",\"polyline-7c124360-d8ea-4778-9b4b-e6942107286a\",\"polyline-23dc5aa2-d39f-4648-a5c3-d793c455ff89\",\"polyline-29d75df8-61f1-4894-8122-15087e92d9c9\",\"polyline-5571dcb8-2645-499c-9bec-91efb7068f78\",\"label-8bb3dbfa-4225-4689-9cb8-098626073638\",\"label-95cd4783-d217-401b-9846-7f8dd15d3c44\",\"label-8ffffcc7-1222-42e9-80ed-ddc1ab07856e\",\"label-2926a260-3c13-40c4-9a2e-3fd489e383a1\",\"label-1d133945-668b-4458-b8ea-b6d910332f9e\",\"label-3f58b8ec-7c10-4941-980d-ef86b517da5b\",\"label-0079e743-90fa-4354-a89e-06d028e0e375\",\"label-2db57f93-31e8-406c-9349-3b339ed931d9\",\"label-64750a06-c695-40c0-9571-e8f5d777dba9\"],\"joinedDeletedWalls\":[{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.JoinedWall\",\"wall\":\"wall-772a1914-5623-4ab8-a573-b0b8ad5028b4\",\"level\":null,\"xStart\":175.71452,\"yStart\":139.07811,\"xEnd\":275.71454,\"yEnd\":139.07811,\"wallAtStart\":\"wall-cf94d0c7-02e0-40af-9433-efee3efbf19d\",\"wallAtEnd\":\"wall-1b8554c2-b8f9-44bf-8eb4-abef1ee9bfa5\",\"joinedAtEndOfWallAtStart\":true,\"joinedAtStartOfWallAtEnd\":true},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.JoinedWall\",\"wall\":\"wall-1b8554c2-b8f9-44bf-8eb4-abef1ee9bfa5\",\"level\":null,\"xStart\":275.71454,\"yStart\":139.07811,\"xEnd\":288.36133,\"yEnd\":288.544,\"wallAtStart\":\"wall-772a1914-5623-4ab8-a573-b0b8ad5028b4\",\"wallAtEnd\":\"wall-68680f92-08e1-47df-ae4e-249d0a30d06b\",\"joinedAtEndOfWallAtStart\":true,\"joinedAtStartOfWallAtEnd\":true},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.JoinedWall\",\"wall\":\"wall-68680f92-08e1-47df-ae4e-249d0a30d06b\",\"level\":null,\"xStart\":288.36133,\"yStart\":288.544,\"xEnd\":438.3607,\"yEnd\":288.97217,\"wallAtStart\":\"wall-1b8554c2-b8f9-44bf-8eb4-abef1ee9bfa5\",\"wallAtEnd\":\"wall-d2f1540f-bf43-45a4-bffb-73aa0d526e35\",\"joinedAtEndOfWallAtStart\":true,\"joinedAtStartOfWallAtEnd\":true},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.JoinedWall\",\"wall\":\"wall-cf94d0c7-02e0-40af-9433-efee3efbf19d\",\"level\":null,\"xStart\":175.71451,\"yStart\":288.544,\"xEnd\":175.71452,\"yEnd\":139.07811,\"wallAtStart\":\"wall-a92c3db2-3d2e-4fa2-84b3-5bfa01b3f78f\",\"wallAtEnd\":\"wall-772a1914-5623-4ab8-a573-b0b8ad5028b4\",\"joinedAtEndOfWallAtStart\":true,\"joinedAtStartOfWallAtEnd\":true},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.JoinedWall\",\"wall\":\"wall-a92c3db2-3d2e-4fa2-84b3-5bfa01b3f78f\",\"level\":null,\"xStart\":175.71451,\"yStart\":388.544,\"xEnd\":175.71451,\"yEnd\":288.544,\"wallAtStart\":\"wall-b36f657b-55e2-4cf1-9949-b31feaf62c69\",\"wallAtEnd\":\"wall-cf94d0c7-02e0-40af-9433-efee3efbf19d\",\"joinedAtEndOfWallAtStart\":true,\"joinedAtStartOfWallAtEnd\":true},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.JoinedWall\",\"wall\":\"wall-b36f657b-55e2-4cf1-9949-b31feaf62c69\",\"level\":null,\"xStart\":438.3607,\"yStart\":388.544,\"xEnd\":175.71451,\"yEnd\":388.544,\"wallAtStart\":\"wall-d2f1540f-bf43-45a4-bffb-73aa0d526e35\",\"wallAtEnd\":\"wall-a92c3db2-3d2e-4fa2-84b3-5bfa01b3f78f\",\"joinedAtEndOfWallAtStart\":true,\"joinedAtStartOfWallAtEnd\":true},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.JoinedWall\",\"wall\":\"wall-d2f1540f-bf43-45a4-bffb-73aa0d526e35\",\"level\":null,\"xStart\":438.3607,\"yStart\":288.97217,\"xEnd\":438.3607,\"yEnd\":388.544,\"wallAtStart\":\"wall-68680f92-08e1-47df-ae4e-249d0a30d06b\",\"wallAtEnd\":\"wall-b36f657b-55e2-4cf1-9949-b31feaf62c69\",\"joinedAtEndOfWallAtStart\":true,\"joinedAtStartOfWallAtEnd\":true}],\"rooms\":[\"room-8267031f-0fdc-416b-8fa2-678895993124\",\"room-93cb2474-1581-41a6-bd37-606e406a003f\"],\"roomsIndices\":[0,1],\"roomsLevels\":[null,null],\"dimensionLines\":[\"dimensionLine-910f572d-b81e-462c-a1dc-01267f3fc203\",\"dimensionLine-60b32b20-c1f6-4b32-8aca-bfa7649e2f2e\",\"dimensionLine-2713f54f-a2bd-41f2-8910-e4e73aa7195f\",\"dimensionLine-37fbd9f5-cf15-4aae-9232-6545db84f21f\"],\"dimensionLinesLevels\":[null,null,null,null],\"polylines\":[\"polyline-778b729f-47a8-4c70-a086-be423eceba59\",\"polyline-af4cc15b-45cf-4839-9e4d-fc349f2a671a\",\"polyline-2c8b98a4-2c53-4935-bd78-bf0ce71db0be\",\"polyline-7c124360-d8ea-4778-9b4b-e6942107286a\",\"polyline-23dc5aa2-d39f-4648-a5c3-d793c455ff89\",\"polyline-29d75df8-61f1-4894-8122-15087e92d9c9\",\"polyline-5571dcb8-2645-499c-9bec-91efb7068f78\"],\"polylinesIndices\":[0,1,2,3,4,5,6],\"polylinesLevels\":[null,null,null,null,null,null,null],\"labels\":[\"label-8bb3dbfa-4225-4689-9cb8-098626073638\",\"label-95cd4783-d217-401b-9846-7f8dd15d3c44\",\"label-8ffffcc7-1222-42e9-80ed-ddc1ab07856e\",\"label-2926a260-3c13-40c4-9a2e-3fd489e383a1\",\"label-1d133945-668b-4458-b8ea-b6d910332f9e\",\"label-3f58b8ec-7c10-4941-980d-ef86b517da5b\",\"label-0079e743-90fa-4354-a89e-06d028e0e375\",\"label-2db57f93-31e8-406c-9349-3b339ed931d9\",\"label-64750a06-c695-40c0-9571-e8f5d777dba9\"],\"labelsLevels\":[null,null,null,null,null,null,null,null,null]},{\"_type\":\"com.eteks.sweethome3d.viewcontroller.PlanController.ItemsDeletionEndUndoableEdit\"}],\"_newObjects\":{\"wall-772a1914-5623-4ab8-a573-b0b8ad5028b4\":{\"_type\":\"com.eteks.sweethome3d.model.Wall\",\"id\":\"wall-772a1914-5623-4ab8-a573-b0b8ad5028b4\",\"properties\":null,\"xStart\":175.71452,\"yStart\":139.07811,\"xEnd\":275.71454,\"yEnd\":139.07811,\"arcExtent\":null,\"wallAtStart\":\"wall-cf94d0c7-02e0-40af-9433-efee3efbf19d\",\"wallAtEnd\":\"wall-1b8554c2-b8f9-44bf-8eb4-abef1ee9bfa5\",\"thickness\":7.5,\"height\":70,\"heightAtEnd\":null,\"leftSideColor\":null,\"leftSideTexture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"eTeks#smallBricks\",\"name\":\"Small bricks\",\"creator\":\"eTeks\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/22\"},\"width\":23,\"height\":14.9,\"xOffset\":0,\"yOffset\":0,\"angle\":0.7853982,\"scale\":1.2,\"leftToRightOriented\":true},\"leftSideShininess\":0,\"leftSideBaseboard\":null,\"rightSideColor\":-10321238,\"rightSideTexture\":null,\"rightSideShininess\":0,\"rightSideBaseboard\":{\"_type\":\"com.eteks.sweethome3d.model.Baseboard\",\"thickness\":1,\"height\":7,\"color\":-4612989,\"texture\":null},\"pattern\":{\"_type\":\"com.eteks.sweethome3d.io.DefaultPatternTexture\",\"name\":\"hatchUp\",\"image\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"http://localhost:8080/lib//resources/patterns/hatchUp.png\"}},\"topColor\":null,\"level\":null,\"symmetric\":true},\"wall-cf94d0c7-02e0-40af-9433-efee3efbf19d\":{\"_type\":\"com.eteks.sweethome3d.model.Wall\",\"id\":\"wall-cf94d0c7-02e0-40af-9433-efee3efbf19d\",\"properties\":null,\"xStart\":175.71451,\"yStart\":288.544,\"xEnd\":175.71452,\"yEnd\":139.07811,\"arcExtent\":3.1415927,\"wallAtStart\":\"wall-a92c3db2-3d2e-4fa2-84b3-5bfa01b3f78f\",\"wallAtEnd\":\"wall-772a1914-5623-4ab8-a573-b0b8ad5028b4\",\"thickness\":7.5,\"height\":70,\"heightAtEnd\":null,\"leftSideColor\":null,\"leftSideTexture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"eTeks#smallBricks\",\"name\":\"Small bricks\",\"creator\":\"eTeks\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/22\"},\"width\":23,\"height\":14.9,\"xOffset\":0,\"yOffset\":0,\"angle\":0.7853982,\"scale\":1.2,\"leftToRightOriented\":true},\"leftSideShininess\":0,\"leftSideBaseboard\":null,\"rightSideColor\":-10321238,\"rightSideTexture\":null,\"rightSideShininess\":0,\"rightSideBaseboard\":{\"_type\":\"com.eteks.sweethome3d.model.Baseboard\",\"thickness\":1,\"height\":7,\"color\":-4612989,\"texture\":null},\"pattern\":{\"_type\":\"com.eteks.sweethome3d.io.DefaultPatternTexture\",\"name\":\"hatchUp\",\"image\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"http://localhost:8080/lib//resources/patterns/hatchUp.png\"}},\"topColor\":null,\"level\":null,\"symmetric\":true},\"wall-a92c3db2-3d2e-4fa2-84b3-5bfa01b3f78f\":{\"_type\":\"com.eteks.sweethome3d.model.Wall\",\"id\":\"wall-a92c3db2-3d2e-4fa2-84b3-5bfa01b3f78f\",\"properties\":null,\"xStart\":175.71451,\"yStart\":388.544,\"xEnd\":175.71451,\"yEnd\":288.544,\"arcExtent\":null,\"wallAtStart\":\"wall-b36f657b-55e2-4cf1-9949-b31feaf62c69\",\"wallAtEnd\":\"wall-cf94d0c7-02e0-40af-9433-efee3efbf19d\",\"thickness\":20,\"height\":20,\"heightAtEnd\":70,\"leftSideColor\":null,\"leftSideTexture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"eTeks#smallBricks\",\"name\":\"Small bricks\",\"creator\":\"eTeks\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/22\"},\"width\":23,\"height\":14.9,\"xOffset\":0,\"yOffset\":0,\"angle\":0.7853982,\"scale\":1.2,\"leftToRightOriented\":true},\"leftSideShininess\":0,\"leftSideBaseboard\":null,\"rightSideColor\":-10321238,\"rightSideTexture\":null,\"rightSideShininess\":0,\"rightSideBaseboard\":{\"_type\":\"com.eteks.sweethome3d.model.Baseboard\",\"thickness\":1,\"height\":7,\"color\":-4612989,\"texture\":null},\"pattern\":{\"_type\":\"com.eteks.sweethome3d.io.DefaultPatternTexture\",\"name\":\"crossHatch\",\"image\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"http://localhost:8080/lib//resources/patterns/crossHatch.png\"}},\"topColor\":-16382458,\"level\":null,\"symmetric\":true},\"wall-b36f657b-55e2-4cf1-9949-b31feaf62c69\":{\"_type\":\"com.eteks.sweethome3d.model.Wall\",\"id\":\"wall-b36f657b-55e2-4cf1-9949-b31feaf62c69\",\"properties\":null,\"xStart\":438.3607,\"yStart\":388.544,\"xEnd\":175.71451,\"yEnd\":388.544,\"arcExtent\":null,\"wallAtStart\":\"wall-d2f1540f-bf43-45a4-bffb-73aa0d526e35\",\"wallAtEnd\":\"wall-a92c3db2-3d2e-4fa2-84b3-5bfa01b3f78f\",\"thickness\":7.5,\"height\":70,\"heightAtEnd\":20,\"leftSideColor\":null,\"leftSideTexture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"eTeks#smallBricks\",\"name\":\"Small bricks\",\"creator\":\"eTeks\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/22\"},\"width\":23,\"height\":14.9,\"xOffset\":0,\"yOffset\":0,\"angle\":0.7853982,\"scale\":1.2,\"leftToRightOriented\":true},\"leftSideShininess\":0,\"leftSideBaseboard\":null,\"rightSideColor\":-10321238,\"rightSideTexture\":null,\"rightSideShininess\":0,\"rightSideBaseboard\":{\"_type\":\"com.eteks.sweethome3d.model.Baseboard\",\"thickness\":1,\"height\":7,\"color\":-4612989,\"texture\":null},\"pattern\":{\"_type\":\"com.eteks.sweethome3d.io.DefaultPatternTexture\",\"name\":\"hatchUp\",\"image\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"http://localhost:8080/lib//resources/patterns/hatchUp.png\"}},\"topColor\":null,\"level\":null,\"symmetric\":true},\"wall-d2f1540f-bf43-45a4-bffb-73aa0d526e35\":{\"_type\":\"com.eteks.sweethome3d.model.Wall\",\"id\":\"wall-d2f1540f-bf43-45a4-bffb-73aa0d526e35\",\"properties\":null,\"xStart\":438.3607,\"yStart\":288.97217,\"xEnd\":438.3607,\"yEnd\":388.544,\"arcExtent\":null,\"wallAtStart\":\"wall-68680f92-08e1-47df-ae4e-249d0a30d06b\",\"wallAtEnd\":\"wall-b36f657b-55e2-4cf1-9949-b31feaf62c69\",\"thickness\":7.5,\"height\":70,\"heightAtEnd\":null,\"leftSideColor\":null,\"leftSideTexture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"eTeks#smallBricks\",\"name\":\"Small bricks\",\"creator\":\"eTeks\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/22\"},\"width\":23,\"height\":14.9,\"xOffset\":0,\"yOffset\":0,\"angle\":0.7853982,\"scale\":1.2,\"leftToRightOriented\":true},\"leftSideShininess\":0,\"leftSideBaseboard\":null,\"rightSideColor\":-10321238,\"rightSideTexture\":null,\"rightSideShininess\":0,\"rightSideBaseboard\":{\"_type\":\"com.eteks.sweethome3d.model.Baseboard\",\"thickness\":1,\"height\":7,\"color\":-4612989,\"texture\":null},\"pattern\":{\"_type\":\"com.eteks.sweethome3d.io.DefaultPatternTexture\",\"name\":\"hatchUp\",\"image\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"http://localhost:8080/lib//resources/patterns/hatchUp.png\"}},\"topColor\":null,\"level\":null,\"symmetric\":true},\"wall-68680f92-08e1-47df-ae4e-249d0a30d06b\":{\"_type\":\"com.eteks.sweethome3d.model.Wall\",\"id\":\"wall-68680f92-08e1-47df-ae4e-249d0a30d06b\",\"properties\":null,\"xStart\":288.36133,\"yStart\":288.544,\"xEnd\":438.3607,\"yEnd\":288.97217,\"arcExtent\":null,\"wallAtStart\":\"wall-1b8554c2-b8f9-44bf-8eb4-abef1ee9bfa5\",\"wallAtEnd\":\"wall-d2f1540f-bf43-45a4-bffb-73aa0d526e35\",\"thickness\":5,\"height\":70,\"heightAtEnd\":null,\"leftSideColor\":null,\"leftSideTexture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"eTeks#smallBricks\",\"name\":\"Small bricks\",\"creator\":\"eTeks\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/22\"},\"width\":23,\"height\":14.9,\"xOffset\":0,\"yOffset\":0,\"angle\":0.7853982,\"scale\":1.2,\"leftToRightOriented\":true},\"leftSideShininess\":0,\"leftSideBaseboard\":null,\"rightSideColor\":-10321238,\"rightSideTexture\":null,\"rightSideShininess\":0,\"rightSideBaseboard\":{\"_type\":\"com.eteks.sweethome3d.model.Baseboard\",\"thickness\":1,\"height\":7,\"color\":-4612989,\"texture\":null},\"pattern\":{\"_type\":\"com.eteks.sweethome3d.io.DefaultPatternTexture\",\"name\":\"reversedHatchDown\",\"image\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"http://localhost:8080/lib//resources/patterns/reversedHatchDown.png\"}},\"topColor\":null,\"level\":null,\"symmetric\":true},\"wall-1b8554c2-b8f9-44bf-8eb4-abef1ee9bfa5\":{\"_type\":\"com.eteks.sweethome3d.model.Wall\",\"id\":\"wall-1b8554c2-b8f9-44bf-8eb4-abef1ee9bfa5\",\"properties\":null,\"xStart\":275.71454,\"yStart\":139.07811,\"xEnd\":288.36133,\"yEnd\":288.544,\"arcExtent\":null,\"wallAtStart\":\"wall-772a1914-5623-4ab8-a573-b0b8ad5028b4\",\"wallAtEnd\":\"wall-68680f92-08e1-47df-ae4e-249d0a30d06b\",\"thickness\":15,\"height\":70,\"heightAtEnd\":null,\"leftSideColor\":null,\"leftSideTexture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"eTeks#smallBricks\",\"name\":\"Small bricks\",\"creator\":\"eTeks\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/22\"},\"width\":23,\"height\":14.9,\"xOffset\":0,\"yOffset\":0,\"angle\":0.7853982,\"scale\":1.2,\"leftToRightOriented\":true},\"leftSideShininess\":0,\"leftSideBaseboard\":null,\"rightSideColor\":-10321238,\"rightSideTexture\":null,\"rightSideShininess\":0,\"rightSideBaseboard\":{\"_type\":\"com.eteks.sweethome3d.model.Baseboard\",\"thickness\":1,\"height\":7,\"color\":-4612989,\"texture\":null},\"pattern\":{\"_type\":\"com.eteks.sweethome3d.io.DefaultPatternTexture\",\"name\":\"hatchUp\",\"image\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"http://localhost:8080/lib//resources/patterns/hatchUp.png\"}},\"topColor\":null,\"level\":null,\"symmetric\":true},\"room-8267031f-0fdc-416b-8fa2-678895993124\":{\"_type\":\"com.eteks.sweethome3d.model.Room\",\"id\":\"room-8267031f-0fdc-416b-8fa2-678895993124\",\"properties\":null,\"name\":\"Room\",\"nameXOffset\":42.76169,\"nameYOffset\":107.003265,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":24,\"bold\":false,\"italic\":false,\"alignment\":1},\"nameAngle\":0,\"points\":[[268.50504,142.82811],[281.04428,291.0232],[281.04428,384.794],[185.71451,384.794],[185.71451,285.77893],[161.86642,283.4301],[148.55052,279.39078],[136.27849,272.83124],[125.52197,264.0036],[116.694336,253.24709],[110.13481,240.97507],[106.095474,227.65915],[104.73155,213.81108],[106.095474,199.96298],[110.13481,186.64706],[116.694336,174.37505],[125.52197,163.61853],[136.2785,154.7909],[148.55049,148.23137],[161.86641,144.19203],[175.71451,142.82811]],\"areaVisible\":true,\"areaXOffset\":14.376923,\"areaYOffset\":-32.505722,\"areaStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":24,\"bold\":false,\"italic\":false,\"alignment\":1},\"areaAngle\":1.3316638000000003,\"floorVisible\":true,\"floorColor\":null,\"floorTexture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"eTeks#blackAndWhiteTiles\",\"name\":\"Black and white tiles\",\"creator\":\"eTeks\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/21\"},\"width\":70,\"height\":70,\"xOffset\":0.25,\"yOffset\":0.15,\"angle\":5.7595863,\"scale\":0.7,\"leftToRightOriented\":true},\"floorShininess\":0,\"ceilingVisible\":false,\"ceilingColor\":null,\"ceilingTexture\":null,\"ceilingShininess\":0,\"level\":null},\"room-93cb2474-1581-41a6-bd37-606e406a003f\":{\"_type\":\"com.eteks.sweethome3d.model.Room\",\"id\":\"room-93cb2474-1581-41a6-bd37-606e406a003f\",\"properties\":null,\"name\":\"Entrance\",\"nameXOffset\":-3.7185364,\"nameYOffset\":34.35269,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":true,\"alignment\":1},\"nameAngle\":0,\"points\":[[281.04428,384.794],[434.6107,384.794],[434.6107,291.4615],[281.04428,291.0232]],\"areaVisible\":false,\"areaXOffset\":-5.6192017,\"areaYOffset\":12.174896,\"areaStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":true,\"alignment\":1},\"areaAngle\":0,\"floorVisible\":true,\"floorColor\":-8293011,\"floorTexture\":null,\"floorShininess\":0,\"ceilingVisible\":false,\"ceilingColor\":null,\"ceilingTexture\":null,\"ceilingShininess\":0,\"level\":null},\"dimensionLine-910f572d-b81e-462c-a1dc-01267f3fc203\":{\"_type\":\"com.eteks.sweethome3d.model.DimensionLine\",\"id\":\"dimensionLine-910f572d-b81e-462c-a1dc-01267f3fc203\",\"properties\":null,\"xStart\":0,\"yStart\":100,\"xEnd\":100,\"yEnd\":100,\"offset\":10,\"lengthStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":1},\"level\":null},\"dimensionLine-60b32b20-c1f6-4b32-8aca-bfa7649e2f2e\":{\"_type\":\"com.eteks.sweethome3d.model.DimensionLine\",\"id\":\"dimensionLine-60b32b20-c1f6-4b32-8aca-bfa7649e2f2e\",\"properties\":null,\"xStart\":100,\"yStart\":100,\"xEnd\":100,\"yEnd\":0,\"offset\":10,\"lengthStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":1},\"level\":null},\"dimensionLine-2713f54f-a2bd-41f2-8910-e4e73aa7195f\":{\"_type\":\"com.eteks.sweethome3d.model.DimensionLine\",\"id\":\"dimensionLine-2713f54f-a2bd-41f2-8910-e4e73aa7195f\",\"properties\":null,\"xStart\":165.71451,\"yStart\":392.294,\"xEnd\":442.2145,\"yEnd\":392.294,\"offset\":8.920593,\"lengthStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":1},\"level\":null},\"dimensionLine-37fbd9f5-cf15-4aae-9232-6545db84f21f\":{\"_type\":\"com.eteks.sweethome3d.model.DimensionLine\",\"id\":\"dimensionLine-37fbd9f5-cf15-4aae-9232-6545db84f21f\",\"properties\":null,\"xStart\":284.6107,\"yStart\":384.794,\"xEnd\":284.6107,\"yEnd\":291.294,\"offset\":-160.97891,\"lengthStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":1},\"level\":null},\"polyline-778b729f-47a8-4c70-a086-be423eceba59\":{\"_type\":\"com.eteks.sweethome3d.model.Polyline\",\"id\":\"polyline-778b729f-47a8-4c70-a086-be423eceba59\",\"properties\":null,\"points\":[[90.00589,209.46523],[42.08908,221.87163],[55.116577,262.6942],[20.16658,274.18665]],\"thickness\":3,\"capStyleName\":null,\"joinStyleName\":\"CURVED\",\"dashStyleName\":\"DASH\",\"dashPattern\":null,\"dashOffset\":0.4,\"startArrowStyleName\":\"OPEN\",\"endArrowStyleName\":null,\"closedPath\":false,\"color\":-1638351,\"elevation\":0,\"level\":null},\"polyline-af4cc15b-45cf-4839-9e4d-fc349f2a671a\":{\"_type\":\"com.eteks.sweethome3d.model.Polyline\",\"id\":\"polyline-af4cc15b-45cf-4839-9e4d-fc349f2a671a\",\"properties\":null,\"points\":[[150.59805,372.10822],[101.317444,372.10822],[30.383453,358.61215]],\"thickness\":5,\"capStyleName\":null,\"joinStyleName\":null,\"dashStyleName\":\"DOT\",\"dashPattern\":null,\"dashOffset\":0,\"startArrowStyleName\":\"DELTA\",\"endArrowStyleName\":\"DISC\",\"closedPath\":false,\"color\":-8750470,\"elevation\":0,\"level\":null},\"polyline-2c8b98a4-2c53-4935-bd78-bf0ce71db0be\":{\"_type\":\"com.eteks.sweethome3d.model.Polyline\",\"id\":\"polyline-2c8b98a4-2c53-4935-bd78-bf0ce71db0be\",\"properties\":null,\"points\":[[357.66626,316.19162],[364.1688,270.17584],[398.09833,254.99918]],\"thickness\":2.54,\"capStyleName\":null,\"joinStyleName\":\"CURVED\",\"dashStyleName\":\"DASH_DOT\",\"dashPattern\":null,\"dashOffset\":0.45,\"startArrowStyleName\":\"DELTA\",\"endArrowStyleName\":null,\"closedPath\":false,\"color\":-16770981,\"elevation\":null,\"level\":null},\"polyline-7c124360-d8ea-4778-9b4b-e6942107286a\":{\"_type\":\"com.eteks.sweethome3d.model.Polyline\",\"id\":\"polyline-7c124360-d8ea-4778-9b4b-e6942107286a\",\"properties\":null,\"points\":[[158.26025,-0.048503876],[434.26025,-0.048503876]],\"thickness\":4,\"capStyleName\":null,\"joinStyleName\":\"ROUND\",\"dashStyleName\":\"DASH\",\"dashPattern\":null,\"dashOffset\":0,\"startArrowStyleName\":null,\"endArrowStyleName\":null,\"closedPath\":false,\"color\":-8716268,\"elevation\":null,\"level\":null},\"polyline-23dc5aa2-d39f-4648-a5c3-d793c455ff89\":{\"_type\":\"com.eteks.sweethome3d.model.Polyline\",\"id\":\"polyline-23dc5aa2-d39f-4648-a5c3-d793c455ff89\",\"properties\":null,\"points\":[[433.51477,3.9514923],[433.51477,117.95149]],\"thickness\":4,\"capStyleName\":null,\"joinStyleName\":\"ROUND\",\"dashStyleName\":\"DASH\",\"dashPattern\":null,\"dashOffset\":0,\"startArrowStyleName\":null,\"endArrowStyleName\":null,\"closedPath\":false,\"color\":-8716268,\"elevation\":null,\"level\":null},\"polyline-29d75df8-61f1-4894-8122-15087e92d9c9\":{\"_type\":\"com.eteks.sweethome3d.model.Polyline\",\"id\":\"polyline-29d75df8-61f1-4894-8122-15087e92d9c9\",\"properties\":null,\"points\":[[427.51477,116.97943],[157.51477,116.97943]],\"thickness\":4,\"capStyleName\":null,\"joinStyleName\":\"ROUND\",\"dashStyleName\":\"DASH\",\"dashPattern\":null,\"dashOffset\":0,\"startArrowStyleName\":null,\"endArrowStyleName\":null,\"closedPath\":false,\"color\":-8716268,\"elevation\":null,\"level\":null},\"polyline-5571dcb8-2645-499c-9bec-91efb7068f78\":{\"_type\":\"com.eteks.sweethome3d.model.Polyline\",\"id\":\"polyline-5571dcb8-2645-499c-9bec-91efb7068f78\",\"properties\":null,\"points\":[[159.69215,117.41133],[159.69215,0.41133118]],\"thickness\":4,\"capStyleName\":null,\"joinStyleName\":\"ROUND\",\"dashStyleName\":\"DASH\",\"dashPattern\":null,\"dashOffset\":0,\"startArrowStyleName\":null,\"endArrowStyleName\":null,\"closedPath\":false,\"color\":-8716268,\"elevation\":null,\"level\":null},\"label-8bb3dbfa-4225-4689-9cb8-098626073638\":{\"_type\":\"com.eteks.sweethome3d.model.Label\",\"id\":\"label-8bb3dbfa-4225-4689-9cb8-098626073638\",\"properties\":null,\"text\":\"Background image\\nvisible in the 3D view\",\"x\":52.01143,\"y\":-12.574131,\"style\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":\"Trebuchet MS\",\"fontSize\":18,\"bold\":false,\"italic\":true,\"alignment\":1},\"color\":-15172352,\"outlineColor\":-16777216,\"angle\":0,\"pitch\":0,\"elevation\":0,\"level\":null},\"label-95cd4783-d217-401b-9846-7f8dd15d3c44\":{\"_type\":\"com.eteks.sweethome3d.model.Label\",\"id\":\"label-95cd4783-d217-401b-9846-7f8dd15d3c44\",\"properties\":null,\"text\":\"Round\\nwall\",\"x\":11.537231,\"y\":290.154,\"style\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":\"Helvetica\",\"fontSize\":16,\"bold\":true,\"italic\":true,\"alignment\":2},\"color\":-1638351,\"outlineColor\":null,\"angle\":0,\"pitch\":0,\"elevation\":0,\"level\":null},\"label-8ffffcc7-1222-42e9-80ed-ddc1ab07856e\":{\"_type\":\"com.eteks.sweethome3d.model.Label\",\"id\":\"label-8ffffcc7-1222-42e9-80ed-ddc1ab07856e\",\"properties\":null,\"text\":\"Sloping wall\\nwith\\nblack top in 3D\",\"x\":-44.84973,\"y\":388.57526,\"style\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":0},\"color\":null,\"outlineColor\":null,\"angle\":0,\"pitch\":0,\"elevation\":0,\"level\":null},\"label-2926a260-3c13-40c4-9a2e-3fd489e383a1\":{\"_type\":\"com.eteks.sweethome3d.model.Label\",\"id\":\"label-2926a260-3c13-40c4-9a2e-3fd489e383a1\",\"properties\":null,\"text\":\"Plan \\nicon\",\"x\":401.34753,\"y\":268.12048,\"style\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":\"Times\",\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":0},\"color\":-16770981,\"outlineColor\":null,\"angle\":6.276567499999999,\"pitch\":null,\"elevation\":0,\"level\":null},\"label-1d133945-668b-4458-b8ea-b6d910332f9e\":{\"_type\":\"com.eteks.sweethome3d.model.Label\",\"id\":\"label-1d133945-668b-4458-b8ea-b6d910332f9e\",\"properties\":null,\"text\":\"Normal\",\"x\":350.18176,\"y\":148.5888,\"style\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":\"Helvetica\",\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":0},\"color\":null,\"outlineColor\":null,\"angle\":0,\"pitch\":null,\"elevation\":0,\"level\":null},\"label-3f58b8ec-7c10-4941-980d-ef86b517da5b\":{\"_type\":\"com.eteks.sweethome3d.model.Label\",\"id\":\"label-3f58b8ec-7c10-4941-980d-ef86b517da5b\",\"properties\":null,\"text\":\"Italic\",\"x\":350.18176,\"y\":172.5888,\"style\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":\"Helvetica\",\"fontSize\":18,\"bold\":false,\"italic\":true,\"alignment\":0},\"color\":null,\"outlineColor\":null,\"angle\":0,\"pitch\":null,\"elevation\":0,\"level\":null},\"label-0079e743-90fa-4354-a89e-06d028e0e375\":{\"_type\":\"com.eteks.sweethome3d.model.Label\",\"id\":\"label-0079e743-90fa-4354-a89e-06d028e0e375\",\"properties\":null,\"text\":\"Bold\",\"x\":350.18176,\"y\":197.5888,\"style\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":\"Helvetica\",\"fontSize\":18,\"bold\":true,\"italic\":false,\"alignment\":0},\"color\":null,\"outlineColor\":null,\"angle\":0,\"pitch\":null,\"elevation\":0,\"level\":null},\"label-2db57f93-31e8-406c-9349-3b339ed931d9\":{\"_type\":\"com.eteks.sweethome3d.model.Label\",\"id\":\"label-2db57f93-31e8-406c-9349-3b339ed931d9\",\"properties\":null,\"text\":\"Bold italic\",\"x\":350.18176,\"y\":220.5888,\"style\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":\"Helvetica\",\"fontSize\":18,\"bold\":true,\"italic\":true,\"alignment\":0},\"color\":null,\"outlineColor\":null,\"angle\":0,\"pitch\":null,\"elevation\":0,\"level\":null},\"label-64750a06-c695-40c0-9571-e8f5d777dba9\":{\"_type\":\"com.eteks.sweethome3d.model.Label\",\"id\":\"label-64750a06-c695-40c0-9571-e8f5d777dba9\",\"properties\":null,\"text\":\"Don't change the content \\nand order of this group\",\"x\":302.84845,\"y\":-9.07795,\"style\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":16,\"bold\":false,\"italic\":false,\"alignment\":1},\"color\":-8716268,\"outlineColor\":null,\"angle\":0,\"pitch\":null,\"elevation\":0,\"level\":null},\"furnitureGroup-91bc763c-6ef2-41d7-b699-090bb2892aea\":{\"_type\":\"com.eteks.sweethome3d.model.HomeFurnitureGroup\",\"id\":\"furnitureGroup-91bc763c-6ef2-41d7-b699-090bb2892aea\",\"properties\":null,\"catalogId\":\"eTeks#chair2\",\"name\":\"Groupe -1-\",\"nameVisible\":false,\"nameXOffset\":0,\"nameYOffset\":0,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":1},\"nameAngle\":0,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/3\"},\"planIcon\":null,\"model\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/4\"},\"modelSize\":16429,\"width\":191.95857100000003,\"widthInPlan\":191.95857100000003,\"depth\":49.900013,\"depthInPlan\":49.900013,\"height\":80.00001,\"heightInPlan\":80.00001,\"elevation\":0,\"dropOnTopElevation\":0.55625,\"movable\":true,\"doorOrWindow\":false,\"modelMaterials\":[{\"_type\":\"com.eteks.sweethome3d.model.HomeMaterial\",\"name\":\"fltan\",\"key\":null,\"color\":null,\"texture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"Puybaret#oak3\",\"name\":\"Chêne\",\"creator\":\"Emmanuel Puybaret\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/5\"},\"width\":40,\"height\":80,\"xOffset\":0,\"yOffset\":0,\"angle\":1.5707964,\"scale\":1,\"leftToRightOriented\":true},\"shininess\":0}],\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,1,0],[0,0,1]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":null,\"staircaseCutOutShape\":null,\"creator\":\"eTeks\",\"backFaceShown\":false,\"resizable\":true,\"deformable\":true,\"texturable\":true,\"horizontallyRotatable\":true,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":296.6424345000001,\"y\":58.932755499999985,\"angle\":0,\"pitch\":0,\"roll\":0,\"modelMirrored\":false,\"level\":null,\"furniture\":[\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\",\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"pieceOfFurniture-aa9d7cfd-12ad-40d1-8884-b404ef7cfe5e\"],\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable\":true,\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable\":true,\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable\":true,\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow\":false,\"fixedWidth\":0,\"fixedDepth\":0,\"fixedHeight\":0,\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation\":1,\"__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency\":null},\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\":{\"_type\":\"com.eteks.sweethome3d.model.HomePieceOfFurniture\",\"id\":\"pieceOfFurniture-b87706ce-7382-4226-87fe-78b5a1fa7ba4\",\"properties\":null,\"catalogId\":\"eTeks#chair2\",\"name\":\"Chair OBJ\",\"nameVisible\":true,\"nameXOffset\":-41.314148,\"nameYOffset\":0.14628601000000147,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":true,\"alignment\":1},\"nameAngle\":4.7820883,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/3\"},\"planIcon\":null,\"model\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/4\"},\"modelSize\":16429,\"width\":48.600002,\"widthInPlan\":48.600002,\"depth\":49.9,\"depthInPlan\":49.9,\"height\":80,\"heightInPlan\":80,\"elevation\":0,\"dropOnTopElevation\":0.55625,\"movable\":true,\"doorOrWindow\":false,\"modelMaterials\":[{\"_type\":\"com.eteks.sweethome3d.model.HomeMaterial\",\"name\":\"fltan\",\"key\":null,\"color\":null,\"texture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"Puybaret#oak3\",\"name\":\"Chêne\",\"creator\":\"Emmanuel Puybaret\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/5\"},\"width\":40,\"height\":80,\"xOffset\":0,\"yOffset\":0,\"angle\":1.5707964,\"scale\":1,\"leftToRightOriented\":true},\"shininess\":0}],\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,1,0],[0,0,1]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":null,\"staircaseCutOutShape\":null,\"creator\":\"eTeks\",\"backFaceShown\":false,\"resizable\":true,\"deformable\":true,\"texturable\":true,\"horizontallyRotatable\":true,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":224.96315000000004,\"y\":58.932762,\"angle\":0,\"pitch\":0,\"roll\":0,\"modelMirrored\":false,\"level\":null},\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\":{\"_type\":\"com.eteks.sweethome3d.model.HomePieceOfFurniture\",\"id\":\"pieceOfFurniture-a8ef4a24-50e0-4a31-a3aa-c235c7a60ca3\",\"properties\":null,\"catalogId\":null,\"name\":\"Chair 3DS\",\"nameVisible\":true,\"nameXOffset\":-1.7302246,\"nameYOffset\":52.603188,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":true,\"alignment\":1},\"nameAngle\":0,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/6\"},\"planIcon\":null,\"model\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/7/chair.3ds\"},\"modelSize\":60507,\"width\":48.600006,\"widthInPlan\":48.600006,\"depth\":49.900013,\"depthInPlan\":49.900013,\"height\":80.00001,\"heightInPlan\":80.00001,\"elevation\":0,\"dropOnTopElevation\":1,\"movable\":true,\"doorOrWindow\":false,\"modelMaterials\":null,\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,0,-1],[0,1,0]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":null,\"staircaseCutOutShape\":null,\"creator\":null,\"backFaceShown\":false,\"resizable\":true,\"deformable\":true,\"texturable\":true,\"horizontallyRotatable\":true,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":296.6424355000001,\"y\":58.932755499999985,\"angle\":0,\"pitch\":0,\"roll\":0,\"modelMirrored\":false,\"level\":null},\"pieceOfFurniture-aa9d7cfd-12ad-40d1-8884-b404ef7cfe5e\":{\"_type\":\"com.eteks.sweethome3d.model.HomePieceOfFurniture\",\"id\":\"pieceOfFurniture-aa9d7cfd-12ad-40d1-8884-b404ef7cfe5e\",\"properties\":null,\"catalogId\":null,\"name\":\"Chair DAE\",\"nameVisible\":true,\"nameXOffset\":41.555176,\"nameYOffset\":-0.26978302000000154,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":true,\"alignment\":1},\"nameAngle\":1.5063455000000001,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/8\"},\"planIcon\":null,\"model\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/9/chair.dae\"},\"modelSize\":132379,\"width\":48.6,\"widthInPlan\":48.6,\"depth\":49.899998,\"depthInPlan\":49.899998,\"height\":80,\"heightInPlan\":80,\"elevation\":0,\"dropOnTopElevation\":1,\"movable\":true,\"doorOrWindow\":false,\"modelMaterials\":null,\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,1,0],[0,0,1]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":null,\"staircaseCutOutShape\":null,\"creator\":null,\"backFaceShown\":false,\"resizable\":true,\"deformable\":true,\"texturable\":true,\"horizontallyRotatable\":true,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":368.3217200000001,\"y\":58.93276299999997,\"angle\":0,\"pitch\":0,\"roll\":0,\"modelMirrored\":false,\"level\":null},\"doorOrWindow-5ffb0568-496f-4ba0-b818-2ca8c01430f3\":{\"_type\":\"com.eteks.sweethome3d.model.HomeDoorOrWindow\",\"id\":\"doorOrWindow-5ffb0568-496f-4ba0-b818-2ca8c01430f3\",\"properties\":null,\"catalogId\":\"eTeks#window85x123\",\"name\":\"Opened window\",\"nameVisible\":true,\"nameXOffset\":42.074005,\"nameYOffset\":-6.266327,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":15,\"bold\":false,\"italic\":false,\"alignment\":1},\"nameAngle\":1.4614916000000004,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/10\"},\"planIcon\":null,\"model\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/11\"},\"modelSize\":9333,\"width\":90.662224,\"widthInPlan\":90.662224,\"depth\":50.979313,\"depthInPlan\":50.979313,\"height\":105,\"heightInPlan\":105,\"elevation\":30,\"dropOnTopElevation\":-0.0074626864,\"movable\":false,\"doorOrWindow\":true,\"modelMaterials\":null,\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,1,0],[0,0,1]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":[{\"_type\":\"com.eteks.sweethome3d.model.Transformation\",\"name\":\"sweethome3d_hinge_1\",\"matrix\":[[0.88857853,0,-0.19167292,-0.04656071],[0,1,0,0],[1.0978502,0,0.88857853,0.4647688]]}],\"staircaseCutOutShape\":null,\"creator\":\"eTeks\",\"backFaceShown\":false,\"resizable\":true,\"deformable\":true,\"texturable\":true,\"horizontallyRotatable\":false,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":260.04358,\"y\":216.37169,\"angle\":1.4863841999999998,\"pitch\":0,\"roll\":0,\"modelMirrored\":false,\"level\":null,\"wallThickness\":0.20958538,\"wallDistance\":-5.612125e-7,\"wallWidth\":1,\"wallLeft\":-4.207593e-8,\"wallHeight\":1,\"wallTop\":0,\"wallCutOutOnBothSides\":true,\"widthDepthDeformable\":true,\"sashes\":[{\"_type\":\"com.eteks.sweethome3d.model.Sash\",\"xAxis\":0.02197798,\"yAxis\":0.20958482,\"width\":0.945055,\"startAngle\":0,\"endAngle\":-1.5707964}],\"cutOutShape\":\"M0,0 v1 h1 v-1 z\",\"boundToWall\":false},\"doorOrWindow-fbcb8a4c-ffd3-4297-929c-7cab17893958\":{\"_type\":\"com.eteks.sweethome3d.model.HomeDoorOrWindow\",\"id\":\"doorOrWindow-fbcb8a4c-ffd3-4297-929c-7cab17893958\",\"properties\":null,\"catalogId\":\"eTeks#frontDoor\",\"name\":\"Front opened door\",\"nameVisible\":true,\"nameXOffset\":39.236267,\"nameYOffset\":6.539398,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":15,\"bold\":false,\"italic\":false,\"alignment\":1},\"nameAngle\":1.5707963999999999,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/12\"},\"planIcon\":null,\"model\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/13\"},\"modelSize\":24179,\"width\":81,\"widthInPlan\":81,\"depth\":41.82518,\"depthInPlan\":41.82518,\"height\":164,\"heightInPlan\":164,\"elevation\":0,\"dropOnTopElevation\":-0.004796163,\"movable\":false,\"doorOrWindow\":true,\"modelMaterials\":null,\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,1,0],[0,0,1]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":[{\"_type\":\"com.eteks.sweethome3d.model.Transformation\",\"name\":\"sweethome3d_hinge_1\",\"matrix\":[[0.88492376,0,-0.24334233,-4.0361085],[0,1,0,0],[0.8913779,0,0.88492376,36.9636]]}],\"staircaseCutOutShape\":null,\"creator\":\"eTeks\",\"backFaceShown\":false,\"resizable\":true,\"deformable\":true,\"texturable\":true,\"horizontallyRotatable\":false,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":421.1985,\"y\":338.44144,\"angle\":1.5707963999999999,\"pitch\":0,\"roll\":0,\"modelMirrored\":false,\"level\":null,\"wallThickness\":0.17933184,\"wallDistance\":-1.8241151e-7,\"wallWidth\":1,\"wallLeft\":0,\"wallHeight\":1,\"wallTop\":0,\"wallCutOutOnBothSides\":true,\"widthDepthDeformable\":true,\"sashes\":[{\"_type\":\"com.eteks.sweethome3d.model.Sash\",\"xAxis\":0.049261082,\"yAxis\":0.17933166,\"width\":0.90147775,\"startAngle\":0,\"endAngle\":-1.5707964}],\"cutOutShape\":\"M0,0 v1 h1 v-1 z\",\"boundToWall\":false},\"doorOrWindow-929cc809-9ee2-4c13-9202-b74672f7b7ca\":{\"_type\":\"com.eteks.sweethome3d.model.HomeDoorOrWindow\",\"id\":\"doorOrWindow-929cc809-9ee2-4c13-9202-b74672f7b7ca\",\"properties\":null,\"catalogId\":\"eTeks#roundWindow\",\"name\":\"Round window\",\"nameVisible\":false,\"nameXOffset\":0,\"nameYOffset\":0,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":1},\"nameAngle\":0,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/14\"},\"planIcon\":null,\"model\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/15\"},\"modelSize\":16819,\"width\":53,\"widthInPlan\":53,\"depth\":5.00075,\"depthInPlan\":5.00075,\"height\":31,\"heightInPlan\":31,\"elevation\":25,\"dropOnTopElevation\":-0.010989011,\"movable\":false,\"doorOrWindow\":true,\"modelMaterials\":null,\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,1,0],[0,0,1]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":null,\"staircaseCutOutShape\":null,\"creator\":\"eTeks\",\"backFaceShown\":false,\"resizable\":true,\"deformable\":true,\"texturable\":true,\"horizontallyRotatable\":false,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":358.47183,\"y\":288.74414,\"angle\":0.002854415199999849,\"pitch\":0,\"roll\":0,\"modelMirrored\":false,\"level\":null,\"wallThickness\":1,\"wallDistance\":0,\"wallWidth\":1,\"wallLeft\":0,\"wallHeight\":1,\"wallTop\":0,\"wallCutOutOnBothSides\":true,\"widthDepthDeformable\":true,\"sashes\":[],\"cutOutShape\":\"M0,0.5 a0.5,0.5 0 1,0 1,0 a0.5,0.5 0 1,0 -1,0 z\",\"boundToWall\":true},\"pieceOfFurniture-6b4c53e1-745e-4581-930b-c8e3a07a0d6b\":{\"_type\":\"com.eteks.sweethome3d.model.HomePieceOfFurniture\",\"id\":\"pieceOfFurniture-6b4c53e1-745e-4581-930b-c8e3a07a0d6b\",\"properties\":null,\"catalogId\":null,\"name\":\"Chair OBJ\",\"nameVisible\":false,\"nameXOffset\":49.555176,\"nameYOffset\":-0.26978302,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":true,\"italic\":false,\"alignment\":1},\"nameAngle\":1.5707963999999999,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/8\"},\"planIcon\":null,\"model\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/4\"},\"modelSize\":132379,\"width\":48.6,\"widthInPlan\":48.6,\"depth\":49.899998,\"depthInPlan\":81.64064,\"height\":80,\"heightInPlan\":73.982414,\"elevation\":0,\"dropOnTopElevation\":1,\"movable\":true,\"doorOrWindow\":false,\"modelMaterials\":[{\"_type\":\"com.eteks.sweethome3d.model.HomeMaterial\",\"name\":\"flltgrey\",\"key\":null,\"color\":null,\"texture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"eTeks#darkBlueTile\",\"name\":\"Dark blue tiles\",\"creator\":\"eTeks\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/16\"},\"width\":33.5,\"height\":33.5,\"xOffset\":0,\"yOffset\":0,\"angle\":0,\"scale\":1,\"leftToRightOriented\":true},\"shininess\":null},{\"_type\":\"com.eteks.sweethome3d.model.HomeMaterial\",\"name\":\"fltan\",\"key\":null,\"color\":null,\"texture\":{\"_type\":\"com.eteks.sweethome3d.model.HomeTexture\",\"catalogId\":\"eTeks#blueSky\",\"name\":\"Blue sky\",\"creator\":\"eTeks\",\"image\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/17\"},\"width\":100,\"height\":41.3,\"xOffset\":0,\"yOffset\":0,\"angle\":0,\"scale\":1,\"leftToRightOriented\":true},\"shininess\":null}],\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,1,0],[0,0,1]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":null,\"staircaseCutOutShape\":null,\"creator\":null,\"backFaceShown\":false,\"resizable\":true,\"deformable\":true,\"texturable\":true,\"horizontallyRotatable\":true,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":148.3071,\"y\":223.73277,\"angle\":4.3597717,\"pitch\":0.5434599499999999,\"roll\":0,\"modelMirrored\":false,\"level\":null},\"light-1bb7757a-437f-40a5-b26f-d779682991b4\":{\"_type\":\"com.eteks.sweethome3d.model.HomeLight\",\"id\":\"light-1bb7757a-437f-40a5-b26f-d779682991b4\",\"properties\":null,\"catalogId\":\"eTeks#lightSource\",\"name\":\"White light source\",\"nameVisible\":false,\"nameXOffset\":0,\"nameYOffset\":0,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":1},\"nameAngle\":0,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/18\"},\"planIcon\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/20\"},\"model\":{\"_type\":\"com.eteks.sweethome3d.io.HomeURLContent\",\"url\":\"jar:http://localhost:8080/readHome.jsp?home=HomeTest!/19\"},\"modelSize\":1286,\"width\":24.13,\"widthInPlan\":24.129997,\"depth\":24.13,\"depthInPlan\":24.129997,\"height\":24.13,\"heightInPlan\":24.129997,\"elevation\":220.0275,\"dropOnTopElevation\":-0.1,\"movable\":true,\"doorOrWindow\":false,\"modelMaterials\":null,\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,1,0],[0,0,1]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":null,\"staircaseCutOutShape\":null,\"creator\":\"eTeks\",\"backFaceShown\":false,\"resizable\":true,\"deformable\":false,\"texturable\":false,\"horizontallyRotatable\":false,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":357.10565,\"y\":336.80493,\"angle\":0,\"pitch\":0,\"roll\":0,\"modelMirrored\":false,\"level\":null,\"lightSources\":[{\"_type\":\"com.eteks.sweethome3d.model.LightSource\",\"x\":0.5,\"y\":0.5,\"z\":0.5,\"color\":12303291,\"diameter\":1}],\"power\":0.5},\"pieceOfFurniture-2b845e86-39bd-4e6a-a938-edca5e9d75fc\":{\"_type\":\"com.eteks.sweethome3d.model.HomePieceOfFurniture\",\"id\":\"pieceOfFurniture-2b845e86-39bd-4e6a-a938-edca5e9d75fc\",\"properties\":null,\"catalogId\":\"eTeks#wardrobe\",\"name\":\"Armoire\",\"nameVisible\":false,\"nameXOffset\":0,\"nameYOffset\":0,\"nameStyle\":{\"_type\":\"com.eteks.sweethome3d.model.TextStyle\",\"fontName\":null,\"fontSize\":18,\"bold\":false,\"italic\":false,\"alignment\":1},\"nameAngle\":0,\"description\":null,\"information\":null,\"icon\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"lib/resources/models/wardrobe.png\"},\"planIcon\":null,\"model\":{\"_type\":\"com.eteks.sweethome3d.tools.URLContent\",\"url\":\"jar:lib/resources/models/wardrobe.zip!/wardrobe.obj\"},\"modelSize\":23218,\"width\":100,\"widthInPlan\":100,\"depth\":54,\"depthInPlan\":54,\"height\":165,\"heightInPlan\":165,\"elevation\":0,\"dropOnTopElevation\":1,\"movable\":true,\"doorOrWindow\":false,\"modelMaterials\":null,\"color\":null,\"texture\":null,\"shininess\":null,\"modelRotation\":[[1,0,0],[0,1,0],[0,0,1]],\"modelCenteredAtOrigin\":true,\"modelTransformations\":null,\"staircaseCutOutShape\":null,\"creator\":\"eTeks\",\"backFaceShown\":false,\"resizable\":true,\"deformable\":true,\"texturable\":true,\"horizontallyRotatable\":true,\"price\":null,\"valueAddedTaxPercentage\":null,\"currency\":null,\"visible\":true,\"x\":50.00000000000006,\"y\":27,\"angle\":0,\"pitch\":0,\"roll\":0,\"modelMirrored\":false,\"level\":null}},\"_action\":\"undo\"}"
        + "]"
    );
    assertEquals(1, edits.size());
    HomeEditsDeserializer.applyEdits(edits);
    
    File savedFile = File.createTempFile("save-", ".sh3d");
    recorder.writeHome(home, savedFile.getPath());
    assertTrue("Empty file", savedFile.length() > 0);

    tempFile.delete();
    savedFile.delete();
  }
  
  
  
}
