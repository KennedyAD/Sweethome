<!--
   SweetHome3DApplet.html 13 Oct 2008
   
   Sweet Home 3D, Copyright (c) 2008-2013 Emmanuel PUYBARET / eTeks <info@eteks.com>
   
   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.
 
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
-->
<script type="text/javascript" src="http://java.com/js/deployJava.js">
</script>

<script type="text/javascript">
  // Add an event listener that checks whether applet is modified or not
  window.onbeforeunload = function() {
    if (document.applets ["SweetHome3DOnline"].isModified()) {
      return 'Edited home has been modified.\nIf you click on Ok, changes will be lost.';
    }
  }
</script>

<script>
  var javaMinimumVersion = "1.6.0_10"; // The first version with Java Plugin 2
  var jars = "lib/SweetHome3DApplet.jar,lib/batik-svgpathparser-1.7.jar,lib/jnlp.jar";
  // Append Jars depending on the platform
  if (navigator.platform.match("Win.*")) {
    if (navigator.platform.match(".*64")) {
      jars += ",lib/windows/x64/java3d.jar";
    } else {
      jars += ",lib/windows/i386/java3d.jar";
    } 
  } else if (navigator.platform.match("Mac.*")) {
    javaMinimumVersion = "1.5";
    jars += ",lib/macosx/java3d.jar";
  } else if (navigator.platform.match("Linux.*")) {
    javaMinimumVersion = "1.6"; // OpenJDK doesn't give its subversion 
    if (navigator.platform.match(".*64")) {
      jars += ",lib/linux/x64/java3d.jar";
    } else {
      jars += ",lib/linux/i386/java3d.jar";
    } 
  } else {
    jars += ",lib/java3d.jar";
  }

  var attributes = {codebase:".",
                    code:"com.eteks.sweethome3d.applet.SweetHome3DApplet",
                    archive:jars,
                    width:"100%", height:"95%",
                    name:"SweetHome3DOnline"};
  // Complete list of available parameters described in the javadoc 
  // of com.eteks.sweethome3d.applet.SweetHome3DApplet class 
  var parameters = {java_arguments:"-Xmx640m",
                    // JNLP file converted to Base 64 encoding with "base64 -i SweetHome3DApplet.jnlp" command
                    jnlp_embedded:"PD94bWwgdmVyc2lvbj0iMS4wIj8+CjwhLS0KICAgU3dlZXRIb21lM0RBcHBsZXQuam5scCAKICAgCiAgIFN3ZWV0IEhvbWUgM0QsIENvcHlyaWdodCAoYykgMjAxMyBFbW1hbnVlbCBQVVlCQVJFVCAvIGVUZWtzIDxpbmZvQGV0ZWtzLmNvbT4KICAgCiAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDIgb2YgdGhlIExpY2Vuc2UsIG9yCiAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiAKICAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KCiAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiAgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlCiAgIEZvdW5kYXRpb24sIEluYy4sIDU5IFRlbXBsZSBQbGFjZSwgU3VpdGUgMzMwLCBCb3N0b24sIE1BICAwMjExMS0xMzA3ICBVU0EKLS0+CjwhLS0gCiAgQWNjb21wYW55aW5nIEpOTFAgZmlsZSBmb3IgU3dlZXQgSG9tZSAzRCBBcHBsZXQuCiAgU2hvdWxkIG1hdGNoIHRoZSBhcHBsZXQgc2NyaXB0IGluIFN3ZWV0SG9tZTNEQXBwbGV0Lmh0bWwgYW5kIHVzZWQgCiAgYXMgaXRzIGpubHBfZW1iZWRkZWQgcGFyYW1ldGVyIHZhbHVlIGFmdGVyIGEgY29udmVyc2lvbiB0byBiYXNlNjQuCiAgVW5kZXIgVW5peCwgY29udmVyc2lvbiB0byBiYXNlNjQgY2FuIGJlIGRvbmUgd2l0aCB0aGUgZm9sbG93aW5nIGNvbW1hbmQ6CiAgICBiYXNlNjQgLWkgU3dlZXRIb21lM0RBcHBsZXQuam5scCIgCi0tPgo8am5scCBocmVmPSJTd2VldEhvbWUzREFwcGxldC5qbmxwIj4KICA8aW5mb3JtYXRpb24+CiAgICA8dGl0bGU+U3dlZXQgSG9tZSAzRCBPbmxpbmU8L3RpdGxlPgogICAgPHZlbmRvcj5lVGVrczwvdmVuZG9yPgogICAgPGhvbWVwYWdlIGhyZWY9Imh0dHA6Ly93d3cuc3dlZXRob21lM2QuY29tLyIvPgogIDwvaW5mb3JtYXRpb24+CgogIDxzZWN1cml0eT4KICAgIDxhbGwtcGVybWlzc2lvbnMvPgogIDwvc2VjdXJpdHk+CgogIDxyZXNvdXJjZXM+CiAgICA8ajJzZSB2ZXJzaW9uPSIxLjUrIiBtYXgtaGVhcC1zaXplPSI2NDBtIi8+CiAgICA8amFyIGhyZWY9ImxpYi9Td2VldEhvbWUzREFwcGxldC5qYXIiIG1haW49InRydWUiLz4KICAgIDxqYXIgaHJlZj0ibGliL2JhdGlrLXN2Z3BhdGhwYXJzZXItMS43LmphciIvPgogICAgPHByb3BlcnR5IG5hbWU9ImNvbS5ldGVrcy5zd2VldGhvbWUzZC5kZXBsb3ltZW50SW5mb3JtYXRpb24iIHZhbHVlPSJPbmxpbmUiLz4KICAgIDxwcm9wZXJ0eSBuYW1lPSJqbmxwLnBhY2tFbmFibGVkIiB2YWx1ZT0iZmFsc2UiLz4KICA8L3Jlc291cmNlcz4KIAogIDxyZXNvdXJjZXMgb3M9IldpbmRvd3MiIGFyY2g9Ing4NiI+CiAgICA8amFyIGhyZWY9ImxpYi93aW5kb3dzL2kzODYvamF2YTNkLmphciIvPgogIDwvcmVzb3VyY2VzPgogIDxyZXNvdXJjZXMgb3M9IldpbmRvd3MiIGFyY2g9ImFtZDY0Ij4KICAgIDxqYXIgaHJlZj0ibGliL3dpbmRvd3MveDY0L2phdmEzZC5qYXIiLz4KICA8L3Jlc291cmNlcz4KCiAgPHJlc291cmNlcyBvcz0iTWFjIE9TIFgiPgogICAgPHByb3BlcnR5IG5hbWU9ImFwcGxlLmF3dC5ncmFwaGljcy5Vc2VRdWFydHoiIHZhbHVlPSJ0cnVlIi8+CiAgICA8cHJvcGVydHkgbmFtZT0iajNkLnJlbmQiIHZhbHVlPSJqb2dsIi8+CiAgICA8amFyIGhyZWY9ImxpYi9tYWNvc3gvamF2YTNkLmphciIvPgogIDwvcmVzb3VyY2VzPgoKICA8cmVzb3VyY2VzIG9zPSJMaW51eCIgYXJjaD0ieDg2IGkzODYiPgogICAgPGphciBocmVmPSJsaWIvbGludXgvaTM4Ni9qYXZhM2QuamFyIi8+CiAgPC9yZXNvdXJjZXM+CiAgPHJlc291cmNlcyBvcz0iTGludXgiIGFyY2g9ImFtZDY0IHg4Nl82NCI+CiAgICA8amFyIGhyZWY9ImxpYi9saW51eC94NjQvamF2YTNkLmphciIvPgogIDwvcmVzb3VyY2VzPgoKICA8cmVzb3VyY2VzIG9zPSJTdW5PUyI+CiAgICA8ZXh0ZW5zaW9uIGhyZWY9Imh0dHA6Ly9kb3dubG9hZC5qYXZhLm5ldC9tZWRpYS9qYXZhM2Qvd2Vic3RhcnQvcmVsZWFzZS9qYXZhM2QtMS41LWxhdGVzdC5qbmxwIi8+CiAgPC9yZXNvdXJjZXM+CgogIDxhcHBsZXQtZGVzYyBtYWluLWNsYXNzPSJjb20uZXRla3Muc3dlZXRob21lM2QuYXBwbGV0LlN3ZWV0SG9tZTNEQXBwbGV0IiAKICAgICAgICAgICAgICAgbmFtZT0iU3dlZXRIb21lM0RPbmxpbmUiIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIi8+Cjwvam5scD4="};
   
  deployJava.setInstallerType("kernel");
  deployJava.setAdditionalPackages("javax.swing,javax.imageio");
  deployJava.runApplet(attributes, parameters, javaMinimumVersion);
</script>